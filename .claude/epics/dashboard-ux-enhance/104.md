---
name: Add contextual empty states
status: open
created: 2026-02-14T13:19:45Z
updated: 2026-02-14T13:26:09Z
github: https://github.com/jobu711/option_alpha_v2/issues/104
depends_on: []
parallel: true
conflicts_with: []
---

# Task: Add contextual empty states

## Description
Replace all generic "No results" messages across the dashboard with contextual empty states that explain what's happening and provide actionable CTAs. Create a reusable `_empty_state.html` Jinja2 partial and use it in the candidates table, debate results, and universe ticker table.

## Acceptance Criteria
- [ ] Reusable `_empty_state.html` partial created with parameters: title, message, cta_text, cta_url (all optional except message)
- [ ] **No scan results**: Shows "No scan data yet" with CTA button to run first scan
- [ ] **No universe tickers**: Shows "Your universe is empty" with CTA to visit universe page
- [ ] **No debate results**: Shows "No debates yet" with explanation of how to select tickers and trigger debates
- [ ] **Empty filtered table** (universe): Shows "No tickers match your filters" with "Clear filters" button
- [ ] **Scan returned no candidates**: Shows "Scan completed but no candidates met the scoring threshold" with hint to adjust settings
- [ ] All empty states use consistent centered styling with muted text
- [ ] No generic "No results" or "No candidates available" messages remain

## Technical Details

**New file:**
- `src/option_alpha/web/templates/_empty_state.html`:
```html
{% macro empty_state(title="", message="", cta_text="", cta_url="", cta_hx_post="", cta_hx_target="") %}
<div class="empty-state">
  {% if title %}<h3 class="empty-state-title">{{ title }}</h3>{% endif %}
  <p class="empty-state-message">{{ message }}</p>
  {% if cta_text and cta_url %}
    <a href="{{ cta_url }}" class="btn btn-primary">{{ cta_text }}</a>
  {% elif cta_text and cta_hx_post %}
    <button class="btn btn-primary" hx-post="{{ cta_hx_post }}" hx-target="{{ cta_hx_target }}">{{ cta_text }}</button>
  {% endif %}
</div>
{% endmacro %}
```

**Files to modify:**
- `src/option_alpha/web/templates/_candidates_table.html` (around line 68-72):
  - Import the macro: `{% from "_empty_state.html" import empty_state %}`
  - Replace the existing empty div with:
    - If `not latest_scan`: `{{ empty_state(title="No scan data yet", message="Run a scan to discover breakout candidates.", cta_text="Run Scan", cta_hx_post="/scan", cta_hx_target="#progress-area") }}`
    - If scan exists but no results: `{{ empty_state(title="No candidates found", message="The scan completed but no tickers met the scoring threshold. Try adjusting weights in Settings.", cta_text="Open Settings", cta_url="/settings") }}`

- `src/option_alpha/web/templates/dashboard.html`:
  - Add empty state for debate results section when no debates exist

- `src/option_alpha/web/templates/_debate_results.html`:
  - Replace any generic empty message with contextual debate empty state

- `src/option_alpha/web/templates/universe/_ticker_table.html` (or equivalent):
  - Replace generic "No tickers" with filter-aware empty state

- `src/option_alpha/web/static/style.css`:
  - `.empty-state` — centered, padding 3rem, text-align center
  - `.empty-state-title` — muted color, font-size 1.1rem
  - `.empty-state-message` — secondary text color, max-width 400px, margin auto

**Key considerations:**
- Templates need `latest_scan` variable passed to distinguish "never scanned" from "scan with no results"
- Check that `routes.py` passes this context variable to the candidates template
- The macro approach keeps it DRY — one partial, many call sites

## Dependencies
- [ ] None — independent of other tasks

## Effort Estimate
- Size: S
- Parallel: true
