---
name: Add active/total ticker count display
status: open
created: 2026-02-14T13:19:45Z
updated: 2026-02-14T13:26:09Z
github: https://github.com/jobu711/option_alpha_v2/issues/102
depends_on: []
parallel: true
conflicts_with: []
---

# Task: Add active/total ticker count display

## Description
Add a prominent "X active of Y total tickers" counter to both the universe page header and near the "Run Scan" button on the dashboard. The counter should update in real-time as tickers are activated/deactivated via HTMX. If 0 active tickers, show a warning state with guidance.

## Acceptance Criteria
- [ ] Universe page shows "X active of Y total tickers" in a prominent header/counter component
- [ ] Dashboard page shows active ticker count near the "Run Scan" button (e.g., "Scan N tickers")
- [ ] Counts update after any ticker activate/deactivate/bulk action via HTMX OOB swap
- [ ] If 0 active tickers, counter shows warning styling (yellow/red) with message "No active tickers — add tickers to your universe"
- [ ] Counts are accurate (match database state)

## Technical Details

**Files to modify:**
- `src/option_alpha/web/templates/universe/universe.html` — Add a `<div id="ticker-count">` component in the page header area showing active/total counts
- `src/option_alpha/web/templates/dashboard.html` — Add active count near the scan controls section
- `src/option_alpha/web/universe_routes.py` — In `list_tickers()` and other endpoints that return partials, include an OOB swap for the ticker-count element: `<div id="ticker-count" hx-swap-oob="true">...</div>`
- `src/option_alpha/web/routes.py` — In the dashboard route, query active/total counts from `universe_service` and pass to template context
- `src/option_alpha/web/static/style.css` — Add `.ticker-count` styles: prominent font size, flexbox layout, warning variant

**Query approach:**
- Use existing `get_active_universe(conn)` for active count (len of result)
- Use `get_full_universe(conn)` for total count (len of result)
- Or add a lightweight `SELECT COUNT(*) FROM universe_tickers WHERE is_active = 1` inline in routes for efficiency

**OOB swap pattern:**
When a tag toggle or ticker toggle endpoint returns its primary response, append an OOB div:
```html
<div id="ticker-count" hx-swap-oob="true">42 active of 128 total</div>
```
This updates the counter without a separate request.

## Dependencies
- [ ] None — this is an independent task

## Effort Estimate
- Size: S
- Parallel: true
