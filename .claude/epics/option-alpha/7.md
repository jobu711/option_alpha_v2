---
name: Technical scoring engine
status: open
created: 2026-02-11T00:53:50Z
updated: 2026-02-11T00:55:00Z
github: https://github.com/jobu711/option_alpha_v2/issues/7
depends_on: [4]
parallel: false
conflicts_with: []
---

# Task: Technical scoring engine

## Description
Build the technical scoring engine that calculates squeeze/consolidation indicators, normalizes them across the universe via percentiles, and produces a weighted geometric mean composite score. Full transparency: every score stores raw value, normalized score, weight, and contribution per indicator per ticker.

## Acceptance Criteria
- [ ] `scoring/indicators.py` calculates: Bollinger Band width, ATR (14-period), RSI (14-period), OBV trend, SMA alignment (20/50/200), relative volume ratio
- [ ] All indicators calculated via pandas-ta-classic library
- [ ] `scoring/normalizer.py` performs percentile normalization (0-100) across entire universe per indicator
- [ ] `scoring/composite.py` computes weighted geometric mean composite score
- [ ] Scoring weights configurable via config system (from Task 1)
- [ ] ScoreBreakdown model stores: indicator name, raw value, normalized (0-100), weight, weighted contribution
- [ ] Unit tests with fixture DataFrames covering normal cases and edge cases (insufficient data, flat prices, zero volume)
- [ ] Squeeze/consolidation detection: tight BB + low ATR + compressed volume signals high score

## Technical Details
- pandas-ta-classic: `ta.bbands()`, `ta.atr()`, `ta.rsi()`, `ta.obv()`, `ta.sma()`
- Relative volume = current volume / 20-day average volume
- SMA alignment score: measure how tightly aligned 20/50/200 SMAs are (tighter = higher consolidation)
- Geometric mean: `(prod(scores^weights))^(1/sum(weights))` - avoids one strong indicator masking weak ones
- Percentile normalization: `scipy.stats.percentileofscore()` or manual rank-based
- Handle edge cases: tickers with < 200 days of data get penalized or excluded

## Dependencies
- [ ] Task 001 (data layer provides OHLCV DataFrames)

## Effort Estimate
- Size: L
- Hours: 8-10
- Parallel: false (depends on Task 1, blocks Task 3)

## Definition of Done
- [ ] Code implemented
- [ ] Tests written and passing
- [ ] Score breakdown fully transparent per ticker
