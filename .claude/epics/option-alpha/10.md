---
name: Catalyst detection & options analysis
status: open
created: 2026-02-11T00:53:50Z
updated: 2026-02-11T00:55:00Z
github: https://github.com/jobu711/option_alpha_v2/issues/10
depends_on: [4, 7]
parallel: false
conflicts_with: []
---

# Task: Catalyst detection & options analysis

## Description
Build two related modules: (1) catalyst detection that fetches earnings dates and scores proximity with exponential decay, and (2) options analysis that fetches chains for top-50 scored candidates, calculates Greeks, filters by liquidity, and recommends specific contracts. Includes FRED API integration for risk-free rate.

## Acceptance Criteria
- [ ] `catalysts/earnings.py` fetches next earnings date per ticker via yfinance
- [ ] Exponential decay proximity scoring: 3-day window = highest, 7-day = medium, 14-day = lower
- [ ] IV crush warning flag for earnings within 7 days
- [ ] Catalyst weight integrated into composite score (default 0.25)
- [ ] `options/chains.py` fetches options chains for top 50 candidates via yfinance
- [ ] `options/greeks.py` calculates delta, gamma, theta, vega via py_vollib with manual BSM fallback
- [ ] `options/recommender.py` selects contract: delta-based strike (~0.30-0.40 delta), 30-60 DTE target
- [ ] Liquidity filtering: open interest > 100, bid-ask spread < 10% of mid, volume > 0
- [ ] Direction derived from technical scores: bullish thesis = calls, bearish = puts
- [ ] Risk-free rate from FRED API with configurable fallback (default 5.0%)
- [ ] Unit tests with mocked yfinance options data and mocked FRED responses

## Technical Details
- Earnings: `yfinance.Ticker(symbol).calendar` for earnings date
- Exponential decay: `score = exp(-days_until / decay_constant)` with decay_constant tuned per window
- py_vollib: `implied_volatility.black_scholes()`, `greeks.analytical.delta/gamma/theta/vega()`
- BSM fallback: implement basic Black-Scholes when py_vollib raises exceptions (edge cases with deep ITM/OTM)
- FRED API: GET `https://api.stlouisfed.org/fred/series/observations?series_id=DGS10` for 10Y Treasury
- Contract selection: filter by DTE range, then pick strike closest to target delta

## Dependencies
- [ ] Task 001 (data fetching)
- [ ] Task 002 (scoring for ranking candidates and direction)

## Effort Estimate
- Size: L
- Hours: 8-10
- Parallel: false (depends on Tasks 1+2)

## Definition of Done
- [ ] Code implemented
- [ ] Tests written and passing
- [ ] Greeks calculations validated against known values
