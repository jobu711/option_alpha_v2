---
name: Backtesting engine
status: open
created: 2026-02-11T00:53:50Z
updated: 2026-02-11T00:55:00Z
github: https://github.com/jobu711/option_alpha_v2/issues/6
depends_on: [4, 7]
parallel: true
conflicts_with: []
---

# Task: Backtesting engine

## Description
Build the backtesting engine that replays the scoring system against historical data to validate that high composite scores correlate with actual price breakouts. Includes historical data fetching, scoring engine replay over configurable date ranges, breakout success measurement, and statistical summary with dashboard integration.

## Acceptance Criteria
- [ ] `backtest/runner.py` runs scoring engine against historical OHLCV data for a date range
- [ ] Configurable parameters: lookback period, breakout threshold (% price move), holding period (days), date range
- [ ] For each historical date: score universe, identify top candidates, measure if price moved X% in predicted direction within Y days
- [ ] `backtest/metrics.py` calculates: win rate, average return, max drawdown, Sharpe-like metric
- [ ] Statistical summary output as Pydantic model
- [ ] Can compare results across different scoring weight configurations
- [ ] Results displayed in dashboard via a backtest results page
- [ ] Backtest triggerable from web UI with parameter inputs
- [ ] Unit tests with fixture historical data

## Technical Details
- Historical data: use yfinance with `period` parameter for historical OHLCV
- Replay loop: for each date in range, simulate scoring with only data available up to that date
- Breakout measurement: compare close price on signal date vs close price N days later
- Win rate: % of top-scored candidates where price moved >= threshold% in predicted direction
- Max drawdown: largest peak-to-trough decline in cumulative returns
- Dashboard integration: new route `/backtest` with form for parameters and results table
- Can be long-running: use same WebSocket progress pattern as main scan

## Dependencies
- [ ] Task 001 (data fetching for historical OHLCV)
- [ ] Task 002 (scoring engine to replay)

## Effort Estimate
- Size: M
- Hours: 6-8
- Parallel: true (only needs Tasks 1+2, can run alongside Tasks 3-6)

## Definition of Done
- [ ] Code implemented
- [ ] Tests written and passing
- [ ] Backtest produces meaningful statistical output
- [ ] Dashboard integration working
