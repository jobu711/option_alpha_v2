---
name: Web dashboard - settings & export
status: open
created: 2026-02-11T00:53:50Z
updated: 2026-02-11T00:55:00Z
github: https://github.com/jobu711/option_alpha_v2/issues/3
depends_on: [8]
parallel: false
conflicts_with: [8]
---

# Task: Web dashboard - settings & export

## Description
Add the settings page and HTML report export functionality to the web dashboard. The settings page allows users to adjust scoring weights, filter thresholds, DTE range, liquidity filters, and toggle AI backend (Ollama/Claude) - all persisted to config file. The export generates a self-contained, date-stamped static HTML report of scan results.

## Acceptance Criteria
- [ ] Settings page accessible from dashboard navigation
- [ ] Settings form: indicator weights (sliders/inputs for each indicator's weight)
- [ ] Settings form: minimum composite score threshold
- [ ] Settings form: DTE range (min/max days to expiration)
- [ ] Settings form: liquidity filters (min open interest, max bid-ask spread, min volume)
- [ ] Settings form: AI backend toggle (Ollama / Claude API) with model selection
- [ ] Settings form: Claude API key input (masked)
- [ ] Changes persist to config.json and apply to next scan
- [ ] Reset to defaults button
- [ ] Data freshness indicator on dashboard (timestamp of last scan, staleness warning if > 24h)
- [ ] HTML report export: one-click button on dashboard
- [ ] Report includes: ranked table, top 10 detail breakdowns, AI debate summaries
- [ ] Report is self-contained (inline CSS, no external dependencies)
- [ ] Report saved with date-stamped filename (e.g., `report_2026-02-11.html`)
- [ ] Unit tests for report generation

## Technical Details
- Settings page: Jinja2 template with form, POST handler updates config via Pydantic settings
- HTMX for form submission without page reload (`hx-post`, swap success message)
- Export: Jinja2 template rendered to string, written to `reports/` directory
- Self-contained HTML: inline all CSS, use minimal inline JS if needed
- Config persistence: read/write `config.json` via Pydantic model's `.model_dump()` / `.model_validate()`
- API key: store in config but never display full key in UI (mask all but last 4 chars)

## Dependencies
- [ ] Task 007 (base web dashboard and templates)

## Effort Estimate
- Size: M
- Hours: 5-7
- Parallel: false (depends on Task 7)

## Definition of Done
- [ ] Code implemented
- [ ] Settings persist and apply correctly
- [ ] HTML report generates and opens in browser
- [ ] Tests written and passing
