---
name: Universe dashboard UI
status: open
created: 2026-02-13T21:15:40Z
updated: 2026-02-13T21:24:02Z
github: https://github.com/jobu711/option_alpha_v2/issues/89
depends_on: [88]
parallel: false
conflicts_with: []
---

# Task: Universe dashboard UI

## Description

Build the `/universe` dashboard page — a single-page layout with a tag sidebar, sortable/paginated ticker table, inline active toggles, bulk actions, and a search modal for adding tickers. Add "Universe" to the top-level navigation in `base.html`. All interactions use HTMX (no JS build step), consistent with the existing dashboard.

## Acceptance Criteria

- [ ] "Universe" link added to `base.html` nav between "Dashboard" and "Settings"
- [ ] `/universe` renders the full dashboard page
- [ ] **Sidebar:** tag list with ticker counts, click to filter table, toggle active/inactive per tag
- [ ] **Toolbar:** search/filter input, "+" add button, bulk action dropdown
- [ ] **Ticker table:** columns for symbol, name, tags, status (active/inactive), last scanned date
- [ ] **Table sorting:** clickable column headers for symbol, name, status sort
- [ ] **Pagination:** 50 tickers per page with prev/next controls
- [ ] **Inline toggle:** click to toggle a ticker active/inactive, updates row via HTMX swap
- [ ] **Bulk select:** row checkboxes with "select all" header checkbox
- [ ] **Bulk actions:** activate, deactivate, remove selected tickers
- [ ] **Search modal:** triggered by "+" button, typeahead search by symbol/name, tag assignment, confirm to add
- [ ] **Active count:** displays total active ticker count in toolbar
- [ ] All interactions are HTMX-powered with no full page reloads

## Technical Details

### Templates

Create under `src/option_alpha/web/templates/universe/`:
- `universe.html` — main page (extends `base.html`), includes sidebar + main area
- `_tag_sidebar.html` — HTMX partial: tag list with counts and toggle buttons
- `_ticker_table.html` — HTMX partial: paginated, sortable ticker table
- `_ticker_row.html` — HTMX partial: single ticker row (for inline toggle swap)
- `_search_modal.html` — HTMX partial: search modal with typeahead results
- `_search_results.html` — HTMX partial: typeahead result dropdown

### Navigation update

In `src/option_alpha/web/templates/base.html`, add between Dashboard and Settings:
```html
<a href="/universe" class="nav-link">Universe</a>
```

### HTMX interaction patterns

| Action | Trigger | HTMX Attribute | Target | Swap |
|--------|---------|---------------|--------|------|
| Tag filter | Click tag in sidebar | `hx-get="/api/universe/tickers?tag=slug"` | `#ticker-table` | innerHTML |
| Tag toggle | Click toggle on tag | `hx-patch="/api/universe/tags/slug"` | `#tag-sidebar` | outerHTML |
| Ticker toggle | Click active/inactive | `hx-patch="/api/universe/tickers/AAPL"` | `closest tr` | outerHTML |
| Bulk action | Submit bulk form | `hx-post="/api/universe/tickers/bulk"` | `#ticker-table` | innerHTML |
| Search typeahead | Keyup in search input | `hx-get="/api/universe/search?q="` `hx-trigger="keyup changed delay:300ms"` | `#search-results` | innerHTML |
| Add ticker | Confirm in modal | `hx-post="/api/universe/tickers"` | `#ticker-table` | innerHTML |
| Pagination | Click page link | `hx-get="/api/universe/tickers?page=N"` | `#ticker-table` | innerHTML |
| Sort column | Click column header | `hx-get="/api/universe/tickers?sort=col&order=asc"` | `#ticker-table` | innerHTML |

### Styling

Add CSS in `src/option_alpha/web/static/style.css` for:
- Sidebar layout (fixed width ~250px, scrollable tag list)
- Two-column layout (sidebar + main content)
- Table styling (consistent with existing `_candidates_table.html`)
- Modal overlay for search
- Toggle switch for active/inactive
- Tag chips/badges on ticker rows

### Alpine.js

Use Alpine.js (already loaded in `base.html`) for:
- Search modal open/close state (`x-data="{ showModal: false }"`)
- Select all checkbox logic
- Bulk action dropdown visibility

### Files affected
- `src/option_alpha/web/templates/base.html` (add nav link)
- `src/option_alpha/web/templates/universe/universe.html` (new)
- `src/option_alpha/web/templates/universe/_tag_sidebar.html` (new)
- `src/option_alpha/web/templates/universe/_ticker_table.html` (new)
- `src/option_alpha/web/templates/universe/_ticker_row.html` (new)
- `src/option_alpha/web/templates/universe/_search_modal.html` (new)
- `src/option_alpha/web/templates/universe/_search_results.html` (new)
- `src/option_alpha/web/static/style.css` (add universe styles)

## Dependencies

- [ ] Task #88 (API routes must exist for HTMX endpoints)

## Effort Estimate

- Size: L
- Hours: 5-7
- Parallel: false (depends on API routes being available)

## Definition of Done

- [ ] "Universe" appears in top-level nav and links to `/universe`
- [ ] Dashboard renders with tag sidebar and ticker table
- [ ] All HTMX interactions work (tag filter, toggle, bulk, search, pagination, sort)
- [ ] Search modal opens, typeahead works, ticker can be added
- [ ] UI is consistent with existing dashboard styling
- [ ] `pytest tests/` passes
