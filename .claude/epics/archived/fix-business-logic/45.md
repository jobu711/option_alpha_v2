---
name: Rebalance AI risk agent prompt and conviction rubric
status: open
created: 2026-02-11T22:04:49Z
updated: 2026-02-11T22:20:13Z
github: https://github.com/jobu711/option_alpha_v2/issues/45
depends_on: [42]
parallel: true
conflicts_with: []
---

# Task: Rebalance AI risk agent prompt and conviction rubric

## Description
The risk agent's system prompt explicitly instructs "Be conservative: when in doubt, recommend no trade with low conviction." Combined with no conviction scoring rubric and all fallbacks defaulting to NEUTRAL/conviction=3, the AI debate has a systematic bias toward neutral outputs. Rebalance the prompt to be objective rather than conservative, add a conviction rubric, and distinguish fallback responses from genuine analysis.

## Acceptance Criteria
- [ ] `RISK_SYSTEM_PROMPT` no longer contains "Be conservative" or "when in doubt, recommend no trade"
- [ ] Risk agent prompt includes conviction scoring rubric: 1-3 (weak/conflicting), 4-6 (moderate/mixed), 7-10 (strong/confirming)
- [ ] Risk agent prompt instructs weighting the pre-computed DIRECTION_SIGNAL from technical analysis
- [ ] `_fallback_thesis()` sets `entry_rationale` to clearly indicate it's a fallback, not genuine analysis (e.g., prefix with "[FALLBACK]")
- [ ] `_fallback_agent_response()` similarly marks analysis as fallback
- [ ] All existing tests pass

## Technical Details
- **agents.py** (lines 48-55, `RISK_SYSTEM_PROMPT`): Replace with balanced prompt:
  ```python
  RISK_SYSTEM_PROMPT = (
      "You are a risk analyst. Synthesize the bull and bear cases to produce "
      "a final trade thesis. Weigh both sides objectively. Your output must "
      "include: direction (bullish/bearish/neutral), conviction (1-10 where "
      "10 is highest), entry rationale, risk factors, and a recommended "
      "action (a specific trade like 'Buy AAPL 180C 30DTE' or 'No trade'). "
      "Give significant weight to the pre-computed DIRECTION SIGNAL from "
      "technical analysis â€” if technicals are clearly bullish or bearish, your "
      "verdict should reflect that unless the bear/bull case presents compelling "
      "counter-evidence. "
      "Conviction rubric: 1-3 = weak or conflicting signals, 4-6 = moderate "
      "with mixed indicators, 7-10 = strong with multiple confirming technicals."
  )
  ```
- **agents.py** (lines 58-65, `_fallback_agent_response()`): Prefix analysis with "[FALLBACK] "
- **agents.py** (lines 68-77, `_fallback_thesis()`): Prefix entry_rationale with "[FALLBACK] "

## Dependencies
- [ ] Task 42 (pipeline should be producing non-neutral upstream signals first)

## Effort Estimate
- Size: S
- Hours: 1
- Parallel: true (independent of Tasks 2-5)

## Definition of Done
- [ ] Risk agent prompt is objective, not conservative-biased
- [ ] Conviction rubric is included
- [ ] Fallback responses clearly marked
- [ ] All existing tests pass (update any tests asserting on old prompt text or fallback strings)
