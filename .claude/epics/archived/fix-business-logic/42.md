---
name: Add data_fetch_period setting and wire through pipeline
status: open
created: 2026-02-11T22:04:49Z
updated: 2026-02-11T22:20:13Z
github: https://github.com/jobu711/option_alpha_v2/issues/42
depends_on: []
parallel: false
conflicts_with: []
---

# Task: Add data_fetch_period setting and wire through pipeline

## Description
The data fetcher defaults to `period="6mo"` (~128 trading days), but the SMA200 indicator requires >= 200 bars. This is the primary root cause of all-neutral scan results. Add a configurable `data_fetch_period` setting defaulting to `"1y"` (~252 trading days) and wire it through the pipeline orchestrator to the fetcher.

## Acceptance Criteria
- [ ] `Settings` class in `config.py` has `data_fetch_period: str = "1y"` field
- [ ] `_download_batch()` and `fetch_batch()` defaults changed from `"6mo"` to `"1y"`
- [ ] `fetch_single()` default changed from `"6mo"` to `"1y"`
- [ ] `orchestrator._phase_data_fetch()` passes `settings.data_fetch_period` to `fetch_batch(period=...)`
- [ ] Existing config.json files without `data_fetch_period` use the `"1y"` default seamlessly
- [ ] All existing tests pass

## Technical Details
- **config.py** (line ~70, Fetch settings section): Add `data_fetch_period: str = "1y"` to `Settings`
- **fetcher.py** (lines 92, 206, 330): Change default `period="6mo"` to `period="1y"` in `_download_batch()`, `fetch_batch()`, `fetch_single()`
- **orchestrator.py** (line ~261): Pass `period=self.settings.data_fetch_period` to `fetch_batch()` call
- Parquet cache has 18-hour TTL, so stale 6mo data auto-refreshes on next scan

## Dependencies
- [ ] None â€” this is the first task in the critical path

## Effort Estimate
- Size: S
- Hours: 1
- Parallel: false (blocks Tasks 2 and 3)

## Definition of Done
- [ ] Code implemented in config.py, fetcher.py, orchestrator.py
- [ ] All 745+ existing tests pass
- [ ] New setting appears in `Settings.model_fields`
