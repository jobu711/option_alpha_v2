---
name: Add diagnostic logging to scoring and direction classification
status: open
created: 2026-02-11T22:04:49Z
updated: 2026-02-11T22:20:13Z
github: https://github.com/jobu711/option_alpha_v2/issues/48
depends_on: [42]
parallel: true
conflicts_with: [44, 46]
---

# Task: Add diagnostic logging to scoring and direction classification

## Description
Add structured logging at key decision points in the scoring phase so developers can diagnose why tickers are classified as they are. Currently there is zero visibility into direction classification reasoning.

## Acceptance Criteria
- [ ] `sma_direction()` logs data sufficiency tier: "AAPL: 253 bars (using SMA20/50/200)" or "AAPL: 128 bars (using SMA20/50 fallback)"
- [ ] `determine_direction()` logs reasoning: "AAPL: RSI=65.2, SMA_dir=bullish -> BULLISH"
- [ ] `score_universe()` logs direction distribution summary after scoring all tickers: "Scoring complete: 15 BULLISH, 8 BEARISH, 27 NEUTRAL out of 50 tickers"
- [ ] All logging uses existing `logger = logging.getLogger(__name__)` pattern
- [ ] Debug-level for per-ticker detail, info-level for phase summary
- [ ] All existing tests pass

## Technical Details
- **indicators.py** (`sma_direction()`): Add `logger.debug()` call showing bar count and which SMA tier is being used
- **composite.py** (`determine_direction()`): Add `logger.debug()` call showing RSI value, SMA direction, and final classification
- **composite.py** (`score_universe()`): After the scoring loop, count direction distribution and log at info level
- Use existing `logger` instances already defined in both files' modules

## Dependencies
- [ ] Task 42 (for consistent config wiring, though logging is independent)
- [ ] Should be done after or coordinated with Tasks 44/46 since those modify the same functions

## Effort Estimate
- Size: XS
- Hours: 0.5
- Parallel: true (can run alongside Tasks 5, 6)

## Definition of Done
- [ ] Diagnostic logs appear at debug and info levels
- [ ] No impact on scan throughput
- [ ] All existing tests pass
